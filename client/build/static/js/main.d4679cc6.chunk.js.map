{"version":3,"sources":["ui/button/Btn.module.scss","ui/input/Inp.module.scss","ui/select/Sel.module.scss","reportWebVitals.js","store/actions/auth.actions.js","store/reducers/auth.reducer.js","services/http.service.js","services/auth.service.js","services/http-client.service.js","services/http-interceptor.service.js","services/helpers.service.js","services/container.js","store/entities/store-data.js","store/entities/store-data-config.js","store/reducers/index.js","store/epics/auth.epics.js","store/epics/index.js","store/index.js","ui/button/Btn.jsx","components/Header.component.jsx","hooks/useBrakepoint.js","ui/input/Inp.jsx","components/Signin.component.jsx","components/Signup.component.jsx","components/Home.component.jsx","components/games/Thousand.component.jsx","app-config.js","components/RoundsMenu.jsx","ui/select/Sel.jsx","components/SelectColor.component.jsx","components/CreateGamer.component.jsx","components/ChooseGamers.component.jsx","components/games/TrainRounds.component.jsx","components/custom/RouteGuard.js","components/games/Train.component.jsx","components/dashboard/Dashboard.component.jsx","App-router.component.jsx","App.jsx","index.jsx"],"names":["module","exports","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","STORE_TOKEN","STORE_TOKEN_SUCCESS","STORE_USER_FROM_TOKEN","STORE_USER_FROM_TOKEN_SUCCESS","SIGNIN","SIGNUP","LOGOUT","AUTH_ERROR","storeToken","token","type","payload","storeTokenSuccess","storeUserFromToken","storeUserFromTokenSuccess","user","authError","initialState","auth","error","userSelector","createDraftSafeSelector","state","HttpService","httpClientService","helpersService","this","headers","getToken","body","JSON","stringify","url","queryParams","_headers","fetch","method","_body","AuthService","httpService","console","log","post","HttpClientService","interceptors","options","badRequest","isError","URLSearchParams","fetch$","from","pipe","switchMap","response","ok","json","data","errorObject","Object","assign","Error","throwError","of","reduce","prev","cur","tries","HelpersService","jwtDecode","localStorage","setItem","getItem","Container","InjectedClass","deps","instance","storage","get","set","Map","inject","stream","catchError","status","err","newToken","store","dispatch","authService","StoreDataService","entitiesConfig","entityName","apiRootPath","entityPluralName","entity","_id","delete","update","put","storeDataActionsCreator","entityConfig","createAction","actionTypes","ADD","REMOVE","GET_ALL","GET_BY_ID","GET_WITH_QUERY","UPDATE","ERROR","actions","add","remove","getAll","getById","getWithQuery","entitiesMetadata","key","entityActions","entitySelectors","entityUppercaseName","toUpperCase","entityUppercasePluralName","entityCapitalizeName","charAt","slice","entityCapitalizePluralName","sortComparer","a","b","name","localeCompare","storeDataModuleConfig","storeDataService","storeDataActionsTypes","storeDataActions","storeDataReducers","storeDataEpics","storeDataSelectors","entityAdapter","createEntityAdapter","selectId","_","entitySlice","createSlice","getInitialState","reducers","entityReducer","reducer","getSelectors","action$","ofType","map","action","use","tap","x","setOne","appError","setAll","addOne","updateOne","storeDataEpicsCreator","storeDataFactory","gamer","recentPlayer","clientPlayer","game","clientGame","clientRound","APP_ERROR","rootReducer","combineReducers","recentPlayerActions","authEpics","signinEpic","signin","removeAll","signupEpic","signup","storeTokenEpic","storeUserFromTokenEpic","decodeToken","entityDataEpicsAr","keys","authEpicsAr","rootEpic","combineEpics","epicMiddleware","createEpicMiddleware","createStore","parse","reHydrateStore","composeWithDevTools","applyMiddleware","getState","next","result","run","Btn","children","color","customType","props","classStr","classes","btn","Array","isArray","forEach","className","HeaderComponent","useState","showSideMenu","setshowSideMenu","useSelector","useDispatch","size","setSize","createMediaString","min","max","MEDIABRAKEPOINTS","BRAKEPOINTS","brakepoints","point","createMediaBrakepoints","xs","sm","md","lg","xl","checkWidth","useCallback","media","window","matchMedia","matches","useEffect","addEventListener","removeEventListener","useBrakepoint","logoutHandler","e","preventDefault","menuSideHandler","end","to","icon","faTrain","faHatCowboySide","role","faUserAstronaut","faGears","faDoorClosed","onClick","faRightFromBracket","faBars","faBarsStaggered","Inp","inp","SigninComponent","setName","password","setPassword","htmlFor","id","placeholder","value","onChange","target","SignupComponent","passwordConfirm","setPasswordConfirm","disabled","HomeComponent","ThousandComponent","config","games","train","maxPlayersQty","playersColors","routeMainScores","routeLocalScores","cars","qty","score","rounds","path","faUsers","faMapMarkedAlt","faRoute","faSchool","RoundsMenuComponent","gameType","round","useParams","clientGameSelectors","clientGames","selectAll","filter","activeRound","useMemo","roundCfg","idx","indexOf","item","length","Sel","sel","colors","defaultColor","SelectColorComponent","filtredColors","selectColor","getDefaultColor","showSelectColor","setShowSelectColor","style","faCircleXmark","selectHandler","CreateGamerComponent","createGamer","undefined","setColor","ChooseGamersComponent","gamerSelectors","recentPlayerSelectors","clientPlayerSelectors","gamers","recentPlayers","clientPlayers","filtredGamers","setFiltredGamers","setFiltredColors","showCreateGamer","setShowCreateGamer","gamerActions","clientPlayerActions","clientGameActions","clientRoundActions","setPlayersToStore","players","i","selectPlayerHandler","player","selectedPlayer","preferredColor","includes","removePlayerHandler","faMinus","scoresLine","clientRounds","uuidv4","TrainRoundsComponent","gameSelectors","clientRoundSelectors","selectById","getPlayerColor","player_id","find","calcQtyOfArrItems","count","arrItem","calcTotalScores","sum","scoresLineAddHandler","changes","scoresLineRemoveHandler","index","splice","scoresLineUpdateHandler","faSubway","faPlus","car","RouteGuard","redirect","canActivate","TrainComponent","navigate","useNavigate","availablePaths","replace","gameActions","routes","element","exact","getPlayerName","endGameHandler","finish","clientRoundsWithTotal","route","DashboardComponent","trainGameActions","trainGameSelectors","trainGames","AppRouterComponent","privateRoutes","publicRoutes","App","subscribe","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d4679cc6.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"Btn_btn__3Cyd5\",\"btn_primary\":\"Btn_btn_primary__3b6JO\",\"btn_secondary\":\"Btn_btn_secondary__1XGyw\",\"btn_danger\":\"Btn_btn_danger__30-2E\",\"btn_background\":\"Btn_btn_background__1YUme\",\"btn_route-main\":\"Btn_btn_route-main__lJlGE\",\"btn_route-local\":\"Btn_btn_route-local__1wgzS\",\"btn_red\":\"Btn_btn_red__1EZJu\",\"btn_green\":\"Btn_btn_green__p4D2-\",\"btn_blue\":\"Btn_btn_blue__egw18\",\"btn_black\":\"Btn_btn_black__1kiHn\",\"btn_yellow\":\"Btn_btn_yellow__13DLY\",\"btn_icon\":\"Btn_btn_icon__2kPzS\",\"btn_narrow\":\"Btn_btn_narrow__1gCHf\",\"btn_sticky\":\"Btn_btn_sticky__20v_3\",\"btn_sticky-left\":\"Btn_btn_sticky-left__1UCxE\",\"btn_sticky-right\":\"Btn_btn_sticky-right__2V8IC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inp\":\"Inp_inp__1zQsD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sel\":\"Sel_sel__1H_Lr\"};","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","export const STORE_TOKEN = 'auth/storeToken';\r\nexport const STORE_TOKEN_SUCCESS = 'auth/storeTokenSuccess';\r\n\r\nexport const STORE_USER_FROM_TOKEN = 'auth/storeUserFromToken';\r\nexport const STORE_USER_FROM_TOKEN_SUCCESS = 'auth/storeUserFromTokenSuccess';\r\n\r\nexport const SIGNIN = 'auth/signin';\r\nexport const SIGNUP = 'auth/signup';\r\n\r\nexport const LOGOUT = 'auth/signup';\r\n\r\nexport const AUTH_ERROR = 'auth/authError';\r\n\r\nexport const storeToken = (token) => {\r\n  return {\r\n    type: STORE_TOKEN,\r\n    payload: token,\r\n  }\r\n}\r\n\r\nexport const storeTokenSuccess = (token) => {\r\n  return {\r\n    type: STORE_TOKEN_SUCCESS,\r\n    payload: token,\r\n  }\r\n}\r\n\r\nexport const storeUserFromToken = () => {\r\n  return {\r\n    type: STORE_USER_FROM_TOKEN,\r\n  }\r\n}\r\n\r\nexport const storeUserFromTokenSuccess = (user) => {\r\n  return {\r\n    type: STORE_USER_FROM_TOKEN_SUCCESS,\r\n    payload: user,\r\n  }\r\n}\r\n\r\nexport const signin = (user) => {\r\n  return {\r\n    type: SIGNIN,\r\n    payload: user,\r\n  }\r\n}\r\n\r\nexport const signup = (user) => {\r\n  return {\r\n    type: SIGNUP,\r\n    payload: user,\r\n  }\r\n}\r\n\r\nexport const logout = () => {\r\n  return {\r\n    type: LOGOUT,\r\n  }\r\n}\r\n\r\nexport const authError = (payload) => {\r\n  return {\r\n    type: AUTH_ERROR,\r\n    payload,\r\n  }\r\n}\r\n","import { AUTH_ERROR, STORE_TOKEN_SUCCESS, STORE_USER_FROM_TOKEN_SUCCESS } from \"../actions/auth.actions\";\r\n// import {reducers} from './entity-config';\r\nimport { createDraftSafeSelector } from '@reduxjs/toolkit'\r\n\r\nconst initialState = {\r\n  auth: {\r\n    token: null,\r\n    user: null,\r\n    error: null,\r\n  }\r\n}\r\n\r\nexport const authReducer = (state = initialState.auth, action) => {\r\n  switch (action.type) {\r\n    case STORE_TOKEN_SUCCESS:\r\n      return {\r\n        ...state,\r\n        token: action.payload,\r\n      }\r\n    case STORE_USER_FROM_TOKEN_SUCCESS:\r\n      return {\r\n        ...state,\r\n        user: action.payload,\r\n      }\r\n    case AUTH_ERROR:\r\n      return {\r\n        ...state,\r\n        error: action.payload\r\n      }\r\n    default: return state;\r\n  }\r\n}\r\nconst selectSelf = (state) => state;\r\nexport const userSelector = createDraftSafeSelector(\r\n  selectSelf,\r\n  (state) => state.auth.user\r\n);\r\n","export default class HttpService {\r\n  constructor(httpClientService, helpersService) {\r\n    this.helpersService = helpersService;\r\n    this.httpClientService = httpClientService;\r\n  }\r\n\r\n  _headers(headers = {}) {\r\n    headers['Content-Type'] = 'application/json';\r\n    headers['Authorization'] = this.helpersService.getToken();\r\n    return headers;\r\n  }\r\n\r\n  _body(body = null) {\r\n    if (body) {\r\n      body = JSON.stringify(body);\r\n    }\r\n    return body;\r\n  }\r\n\r\n  get(url, { headers = {}, queryParams } = {}) {\r\n    headers = this._headers(headers);\r\n    return this.httpClientService.fetch(url, { method: 'get', headers, queryParams });\r\n  }\r\n\r\n  post(url, { headers = {}, body = {}, queryParams } = {}) {\r\n    headers = this._headers(headers);\r\n    body = this._body(body);\r\n    return this.httpClientService.fetch(url, { method: 'post', headers, body, queryParams });\r\n  }\r\n\r\n  put(url, { headers = {}, body = {}, queryParams } = {}) {\r\n    headers = this._headers(headers);\r\n    body = this._body(body);\r\n    return this.httpClientService.fetch(url, { method: 'put', headers, body, queryParams });\r\n  }\r\n\r\n  patch(url, { headers = {}, body = {}, queryParams } = {}) {\r\n    headers = this._headers(headers);\r\n    body = this._body(body);\r\n    return this.httpClientService.fetch(url, { method: 'patch', headers, body, queryParams });\r\n  }\r\n\r\n  delete(url, { headers = {}, body = {}, queryParams } = {}) {\r\n    headers = this._headers(headers);\r\n    body = this._body(body);\r\n    return this.httpClientService.fetch(url, { method: 'delete', headers, body, queryParams });\r\n  }\r\n}\r\n","export default class AuthService {\r\n  constructor(httpService) {\r\n    this.httpService = httpService;\r\n  }\r\n\r\n  signin(user) {\r\n    // localStorage.removeItem('persistStorage');\r\n    // console.log('local signin', localStorage.getItem('persistStorage'))\r\n    console.log('user', user)\r\n    return this.httpService.post('/api/auth/signin', {body: user});\r\n  }\r\n\r\n  signup(user) {\r\n    // localStorage.removeItem('persistStorage');\r\n    // console.log('local signup', localStorage.getItem('persistStorage'))\r\n\r\n    return this.httpService.post('/api/auth/signup', { body: user });\r\n  }\r\n\r\n}","import { from, throwError, of } from 'rxjs';\r\nimport { switchMap } from 'rxjs/operators';\r\n\r\nexport default class HttpClientService {\r\n  constructor(interceptors) {\r\n    this.interceptors = interceptors;\r\n  }\r\n\r\n  fetch(url, options) {\r\n    let isError = false;\r\n    let badRequest;\r\n    \r\n    if (options.queryParams) {\r\n      url = `${url}?${new URLSearchParams(options.queryParams)}`;\r\n    }\r\n    delete options.queryParams;\r\n\r\n    let fetch$ = from(fetch(url, options)).pipe(\r\n      switchMap((response) => {\r\n        if (!response.ok) {\r\n          isError = true;\r\n          // save request data\r\n          badRequest = { url, options }\r\n        }\r\n        return from(response.json());\r\n      }),\r\n      switchMap((data) => {\r\n        if (isError) {\r\n          // append request data to error\r\n          const errorObject = Object.assign(new Error(), data, { badRequest });\r\n          // forward error\r\n          return throwError(() => errorObject);\r\n        }\r\n        return of(data);\r\n      }),\r\n    )\r\n\r\n    // consistently add interceptors to the stream\r\n    return this.interceptors.reduce((prev, cur) => {\r\n      return cur(prev);\r\n    }, fetch$)\r\n  }\r\n}\r\n","import { throwError } from 'rxjs';\r\nimport { catchError, switchMap } from 'rxjs/operators';\r\nimport { httpClientService } from './container';\r\nimport { store } from '../store';\r\nimport { storeToken } from '../store/actions/auth.actions';\r\n\r\nlet tries = 0;\r\nexport default function httpInterceptor(stream) {\r\n  return stream.pipe(\r\n    catchError((error) => {\r\n      // not authenticated (new user without token, wrong token, try to reach protected route)\r\n      // exclude wrong credentials on login\r\n      if (error.status === 401 && error.badRequest.url !== '/api/auth/signin') {\r\n        if (tries > 0) {\r\n          // get protected resource limit exceeded\r\n          tries = 0;\r\n          return throwError(() => error);\r\n        }\r\n        // first try to get protected resource fail\r\n        // bad token or new guest user without token\r\n        // try to get valid guest token\r\n        return httpClientService.fetch('/api/auth/signup', {\r\n          method: 'post',\r\n          headers: { 'Content-Type': 'application/json' }\r\n        }).pipe(\r\n          catchError((err) => {\r\n            // error get valid guest token\r\n            // forward error\r\n            return throwError(() => err);\r\n          }),\r\n          switchMap((newToken) => {\r\n            // successeful get valid guest token\r\n            // save new token to store\r\n            store.dispatch(storeToken(newToken));\r\n            tries++;\r\n            // second try to get protected resource\r\n            const { url, options } = error.badRequest;\r\n            options.headers['Authorization'] = newToken;\r\n            return httpClientService.fetch(url, options)\r\n          }),\r\n        );\r\n      }\r\n      tries = 0;\r\n      // forward error\r\n      return throwError(() => error);\r\n    }),\r\n  );\r\n}\r\n","export default class HelpersService {\r\n  constructor(jwtDecode) {\r\n    this.jwtDecode = jwtDecode;\r\n  }\r\n\r\n  storeToken(token) {\r\n    localStorage.setItem('token', token);\r\n  }\r\n\r\n  getToken() {\r\n    return localStorage.getItem('token');\r\n  }\r\n\r\n  decodeToken() {\r\n    return this.jwtDecode(this.getToken());\r\n  }\r\n}","import HttpService from './http.service';\r\nimport AuthService from './auth.service';\r\nimport HttpClientService from './http-client.service';\r\nimport httpInterceptor from './http-interceptor.service';\r\nimport HelpersService from './helpers.service';\r\nimport jwtDecode from \"jwt-decode\";\r\n\r\nexport default class Container {\r\n  static storage = new Map();\r\n\r\n  static inject(InjectedClass, deps = []) {\r\n    let instance = this.storage.get(InjectedClass);\r\n    if (instance) {\r\n      return instance;\r\n    }\r\n    instance = new InjectedClass(...deps);\r\n    this.storage.set(InjectedClass, instance);\r\n    return instance;\r\n  }\r\n}\r\n\r\nexport const helpersService = Container.inject(HelpersService, [jwtDecode]);\r\nexport const httpClientService = Container.inject(HttpClientService, [[httpInterceptor]]);\r\nexport const httpService = Container.inject(HttpService, [httpClientService, helpersService]);\r\nexport const authService = Container.inject(AuthService, [httpService]);\r\n","import { ofType } from 'redux-observable';\r\nimport { map, catchError, switchMap, tap } from 'rxjs/operators';\r\nimport { httpService } from '../../services/container';\r\nimport { appError } from '../reducers';\r\nimport {\r\n  createEntityAdapter,\r\n  createSlice,\r\n} from '@reduxjs/toolkit'\r\n\r\nclass StoreDataService {\r\n  constructor(httpService, entitiesConfig) {\r\n    this.httpService = httpService;\r\n    this.entitiesConfig = entitiesConfig;\r\n  }\r\n\r\n  use(entityName) {\r\n    if (this.entitiesConfig[entityName]) {\r\n      this.entityName = entityName;\r\n      this.apiRootPath = this.entitiesConfig[entityName].apiRootPath;\r\n      this.entityPluralName = this.entitiesConfig[entityName].entityPluralName;\r\n      return this;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  add(entity) {\r\n    return this.httpService.post(`${this.apiRootPath}${this.entityName}`, { body: entity });\r\n  } // setOne\r\n\r\n  remove(_id) {\r\n    return this.httpService.delete(`${this.apiRootPath}${this.entityName}/${_id}`);\r\n  } // removeOne\r\n\r\n  getAll() {\r\n    return this.httpService.get(`${this.apiRootPath}${this.entityPluralName}`);\r\n  } // setAll\r\n\r\n  getById(_id) {\r\n    return this.httpService.get(`${this.apiRootPath}${this.entityName}/${_id}`);\r\n  }\r\n\r\n  getWithQuery(queryParams) {\r\n    return this.httpService.get(`${this.apiRootPath}${this.entityPluralName}`, queryParams);\r\n  }  // setAll\r\n\r\n  //should behave like patch\r\n  update(update) {\r\n    return this.httpService.put(`${this.apiRootPath}${this.entityName}/${update._id}`, { body: update });\r\n  }  //upsertOne\r\n}\r\n\r\nconst storeDataActionsCreator = (entityConfig) => {\r\n  const { entityName } = entityConfig;\r\n\r\n  const createAction = (type, payload) => {\r\n    return (payload) => ({ type, payload });\r\n  }\r\n\r\n  const actionTypes = {\r\n    ADD: `${entityName}/dataService add`,\r\n    REMOVE: `${entityName}/dataService remove`,\r\n    GET_ALL: `${entityName}/dataService getAll`,\r\n    GET_BY_ID: `${entityName}/dataService getById`,\r\n    GET_WITH_QUERY: `${entityName}/dataService getWithQuery`,\r\n    UPDATE: `${entityName}/dataService update`,\r\n    ERROR: `${entityName}/dataService error`,\r\n  }\r\n\r\n  const actions = {\r\n    add: createAction(actionTypes.ADD),\r\n    remove: createAction(actionTypes.REMOVE),\r\n    getAll: createAction(actionTypes.GET_ALL),\r\n    getById: createAction(actionTypes.GET_BY_ID),\r\n    getWithQuery: createAction(actionTypes.GET_WITH_QUERY),\r\n    update: createAction(actionTypes.UPDATE),\r\n    error: createAction(actionTypes.ERROR),\r\n  }\r\n  return {\r\n    actionTypes, actions\r\n  }\r\n}\r\n\r\n// const entityReducersCreator = (entityConfig, actionTypes) => {\r\n//   const {\r\n//     entityName,\r\n//     initialState,\r\n//     entityUppercaseName,\r\n//     entityUppercasePluralName,\r\n//   } = entityConfig;\r\n\r\n//   const reducer = (state = initialState, action) => {\r\n//     switch (action.type) {\r\n//       case actionTypes[`GET_${entityUppercaseName}_SUCCESS`]:\r\n//         return {\r\n//           ...state,\r\n//           ...{ [entityName]: { entity: action.payload } },\r\n//         }\r\n//       case actionTypes[`GET_${entityUppercasePluralName}_SUCCESS`]:\r\n//         return {\r\n//           ...state,\r\n//           ...{ [entityName]: { entity: action.payload } },\r\n//         }\r\n//       case actionTypes[`ERROR_${entityUppercaseName}`]:\r\n//         return {\r\n//           ...state,\r\n//           ...{ [entityName]: { error: action.payload } },\r\n//         }\r\n//       default:\r\n//         return state;\r\n//     }\r\n//   }\r\n//   return reducer;\r\n// }\r\n\r\nconst storeDataEpicsCreator = (entityConfig, actionTypes, actions, storeDataService) => {\r\n  const { entityName } = entityConfig;\r\n  const epics = {\r\n    [`${entityName}/getById`]:\r\n      (action$) => action$.pipe(\r\n        ofType(actionTypes.GET_BY_ID),\r\n        map((action) => action.payload),\r\n        switchMap((_id) => storeDataService.use(entityName).getById(_id).pipe(\r\n          tap((x) => console.log('got one ', x)),\r\n          switchMap((entity) => [actions.setOne(entity)]),\r\n          catchError((error) => [appError(error)])\r\n        )),\r\n      ),\r\n    [`${entityName}/getAll`]:\r\n      (action$) => action$.pipe(\r\n        ofType(actionTypes.GET_ALL),\r\n        tap((x) => console.log('x', x)),\r\n        switchMap(() => storeDataService.use(entityName).getAll().pipe(\r\n          switchMap((entity) => [actions.setAll(entity)]),\r\n          catchError((error) => [appError(error)])\r\n        )),\r\n      ),\r\n    [`${entityName}/add`]:\r\n      (action$) => action$.pipe(\r\n        ofType(actionTypes.ADD),\r\n        map((action) => action.payload),\r\n        switchMap((payload) => storeDataService.use(entityName).add(payload).pipe(\r\n          switchMap((entity) => [actions.addOne(entity)]),\r\n          catchError((error) => [appError(error)])\r\n        )),\r\n      ),\r\n    [`${entityName}/update`]:\r\n      (action$) => action$.pipe(\r\n        ofType(actionTypes.UPDATE),\r\n        map((action) => action.payload),\r\n        switchMap((payload) => storeDataService.use(entityName).update(payload).pipe(\r\n          switchMap((entity) => [actions.updateOne(entity)]),\r\n          catchError((error) => [appError(error)])\r\n        )),\r\n      ),\r\n\r\n  };\r\n  return epics;\r\n}\r\n\r\nconst storeDataModuleConfig = (entitiesMetadata) => {\r\n  const entitiesConfig = {};\r\n  for (let key in entitiesMetadata) {\r\n    const entityPluralName = entitiesMetadata[key].entityPluralName || key + 's';\r\n    entitiesConfig[key] = {\r\n      entityActions: entitiesMetadata[key].entityActions,\r\n      entitySelectors: entitiesMetadata[key].entitySelectors,\r\n      entityName: key,\r\n      apiRootPath: entitiesMetadata[key].apiRootPath || '/api/store/',\r\n      entityPluralName,\r\n      entityUppercaseName: key.toUpperCase(),\r\n      entityUppercasePluralName: entityPluralName.toUpperCase(),\r\n      entityCapitalizeName: key.charAt(0).toUpperCase() + key.slice(1),\r\n      entityCapitalizePluralName:\r\n      entityPluralName.charAt(0).toUpperCase() + entityPluralName.slice(1),\r\n      sortComparer: entitiesMetadata[key].sortComparer || function (a, b) {return a.name.localeCompare(b.name)},\r\n    }\r\n  }\r\n  return entitiesConfig;\r\n}\r\n\r\nexport default function storeDataFactory(entitiesMetadata) {\r\n  const entitiesConfig = storeDataModuleConfig(entitiesMetadata);\r\n  const storeDataService = new StoreDataService(httpService, entitiesConfig);\r\n  const storeDataActionsTypes = {};\r\n  const storeDataActions = {};\r\n  const storeDataReducers = {};\r\n  let storeDataEpics = {};\r\n  const storeDataSelectors = {}\r\n\r\n  for (let key in entitiesConfig) {\r\n    storeDataActions[key] = storeDataActionsCreator(entitiesConfig[key]).actions;\r\n    storeDataActionsTypes[key] = storeDataActionsCreator(entitiesConfig[key]).actionTypes;\r\n\r\n    const entityAdapter = createEntityAdapter({\r\n      selectId: (_) => _._id,\r\n      sortComparer: entitiesConfig[key].sortComparer\r\n    })\r\n\r\n    const entitySlice = createSlice({\r\n      name: entitiesConfig[key].entityName,\r\n      initialState: entityAdapter.getInitialState(),\r\n      reducers: {\r\n        ...entityAdapter,\r\n        // gamersaddOne: gamerAdapter.addOne,\r\n        // gamersReceived(state, action) {\r\n        //   gamerAdapter.setAll(state, action.payload.gamer)\r\n        // },\r\n      },\r\n    });\r\n\r\n    const entityReducer = entitySlice.reducer;\r\n    const entityActions = entitySlice.actions;\r\n    const entitySelectors = entityAdapter.getSelectors((state) => state[entitiesConfig[key].entityName]);\r\n    storeDataActions[key] = { ...entityActions, ...storeDataActions[key] };\r\n    storeDataSelectors[key] = entitySelectors;\r\n    storeDataReducers[key] = entityReducer;\r\n    storeDataEpics = {\r\n      ...storeDataEpics,\r\n      ...storeDataEpicsCreator(entitiesConfig[key],\r\n        storeDataActionsTypes[key],\r\n        storeDataActions[key],\r\n        storeDataService\r\n      )\r\n    };\r\n\r\n  }\r\n  return {\r\n    storeDataActions,\r\n    storeDataActionsTypes,\r\n    storeDataEpics,\r\n    storeDataSelectors,\r\n    storeDataReducers,\r\n  };\r\n}\r\n","import storeDataFactory from './store-data';\r\n// import {gamerActions, gamerSelectors} from './gamer';\r\n\r\nconst entitiesMetadata = {\r\n  // all regitred gamers\r\n  gamer: {\r\n    entityPluralName: 'gamers',\r\n    apiRootPath: '/api/store/',\r\n    sortComparer: (a, b) => a.name.localeCompare(b.name),\r\n  },\r\n  // last game players\r\n  recentPlayer: {\r\n    entityPluralName: 'recentPlayers',\r\n    apiRootPath: '/api/store/',\r\n    sortComparer: (a, b) => a._id.localeCompare(b._id),\r\n  },\r\n  // gamers chosen for game (with custom color selected)\r\n  clientPlayer: {\r\n    entityPluralName: 'clientPlayers',\r\n    apiRootPath: '/api/store/',\r\n    sortComparer: (a, b) => a._id.localeCompare(b._id),\r\n  },\r\n  game: {\r\n    entityPluralName: 'games',\r\n    apiRootPath: '/api/store/',\r\n    sortComparer: (a, b) => a.type.localeCompare(b.type),\r\n\r\n  },\r\n  clientGame: {\r\n    entityPluralName: 'clientGames',\r\n    apiRootPath: '/api/store/',\r\n    sortComparer: (a, b) => a.type.localeCompare(b.type),\r\n  },\r\n  clientRound: {\r\n    entityPluralName: 'currentRounds',\r\n    apiRootPath: '/api/store/',\r\n    sortComparer: (a, b) => a._id.localeCompare(b._id),\r\n  }\r\n}\r\n\r\nconst {\r\n  storeDataActions,\r\n  storeDataReducers,\r\n  storeDataActionsTypes,\r\n  storeDataEpics,\r\n  storeDataSelectors\r\n} = storeDataFactory(entitiesMetadata);\r\n\r\n// console.log('actions', storeDataActions);\r\n// console.log('storeDataReducers', storeDataReducers);\r\n// console.log('actionTypes', storeDataActionsTypes);\r\n// console.log('epics', storeDataEpics);\r\n// console.log('storeDataSelectors', storeDataSelectors);\r\n\r\nexport {\r\n  storeDataActions,\r\n  storeDataReducers,\r\n  storeDataActionsTypes,\r\n  storeDataEpics,\r\n  storeDataSelectors\r\n};\r\n\r\n\r\n","import { combineReducers } from \"redux\";\r\nimport { authReducer } from './auth.reducer';\r\nimport { storeDataReducers } from '../entities/store-data-config';\r\n\r\nexport const APP_ERROR = 'application/error';\r\n\r\nexport const appError = (payload) => {\r\n  return {\r\n    type: APP_ERROR,\r\n    payload,\r\n  }\r\n}\r\n\r\nconst appErrorReducer = (state = { error: null }, action) => {\r\n  switch (action.type) {\r\n    case APP_ERROR:\r\n      return {\r\n        ...state,\r\n        error: action.payload\r\n      }\r\n    default: return state;\r\n  }\r\n}\r\n\r\nexport const rootReducer = combineReducers({\r\n  auth: authReducer,\r\n  // gamer: gamerReducer,\r\n  appError: appErrorReducer,\r\n  ...storeDataReducers,\r\n});\r\n","import { ofType } from 'redux-observable';\r\nimport { map, catchError, switchMap, tap } from 'rxjs/operators';\r\nimport { throwError, of } from 'rxjs';\r\nimport {\r\n  authError, storeToken, storeTokenSuccess, storeUserFromToken, storeUserFromTokenSuccess,\r\n  STORE_TOKEN, SIGNIN, SIGNUP, STORE_USER_FROM_TOKEN, LOGOUT\r\n} from '../actions/auth.actions';\r\nimport { authService, helpersService } from '../../services/container';\r\nimport { storeDataActions } from '../entities/store-data-config';\r\n\r\nconst recentPlayerActions = storeDataActions['recentPlayer'];\r\n\r\nconst signinEpic = (action$) => action$.pipe(\r\n  ofType(SIGNIN),\r\n  map((action) => action.payload),\r\n  switchMap((user) => authService.signin(user).pipe(\r\n    switchMap((token) => [storeToken(token), recentPlayerActions.removeAll()]),\r\n    catchError((err) => [authError(err)])\r\n  )),\r\n);\r\n\r\nconst signupEpic = (action$) => action$.pipe(\r\n  ofType(SIGNUP, LOGOUT),\r\n  map((action) => action.payload),\r\n  switchMap((user) => authService.signup(user).pipe(\r\n    switchMap((token) => [storeToken(token), recentPlayerActions.removeAll()]),\r\n    catchError((err) => [authError(err)])\r\n  )),\r\n);\r\n\r\nconst storeTokenEpic = (action$) => action$.pipe(\r\n  ofType(STORE_TOKEN),\r\n  map((action) => action.payload),\r\n  switchMap((payload) => {\r\n    return of(payload).pipe(\r\n      switchMap((token) => {\r\n        helpersService.storeToken(token);\r\n        return [storeTokenSuccess(token), storeUserFromToken()]\r\n      }),\r\n      catchError((err) => [authError(err)])\r\n    );\r\n  })\r\n);\r\n\r\nconst storeUserFromTokenEpic = (action$) => action$.pipe(\r\n  ofType(STORE_USER_FROM_TOKEN),\r\n  switchMap(() => {\r\n    return of('_').pipe(\r\n      switchMap(() => {\r\n        let user;\r\n        try {\r\n          user = helpersService.decodeToken();\r\n        } catch (error) {\r\n          return throwError(() => error);\r\n        }\r\n        return [storeUserFromTokenSuccess(user)];\r\n      }),\r\n      catchError((err) => [authError(err)])\r\n    );\r\n  })\r\n);\r\n\r\nconst authEpics = { signinEpic, signupEpic, storeTokenEpic, storeUserFromTokenEpic };\r\n\r\nexport default authEpics;","import { combineEpics } from 'redux-observable';\r\nimport authEpics from './auth.epics';\r\nimport { storeDataEpics } from '../entities/store-data-config';\r\n\r\nconst entityDataEpicsAr = Object.keys(storeDataEpics).map((key) => storeDataEpics[key]);\r\nconst authEpicsAr = Object.keys(authEpics).map((key) => authEpics[key]);\r\n\r\nexport const rootEpic = combineEpics(\r\n  ...authEpicsAr,\r\n  ...entityDataEpicsAr,\r\n);\r\n\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport { createEpicMiddleware } from 'redux-observable';\r\n\r\nimport { rootReducer } from './reducers';\r\nimport { rootEpic } from './epics';\r\n\r\nconst epicMiddleware = createEpicMiddleware();\r\nconst localStorageMiddleware = ({ getState }) => {\r\n  return (next) => (action) => {\r\n    const result = next(action);\r\n    localStorage.setItem('persistStorage', JSON.stringify({\r\n      game: getState().game,\r\n      recentPlayer: getState().recentPlayer,\r\n      clientPlayer: getState().clientPlayer,\r\n      clientGame: getState().clientGame,\r\n      clientRound: getState().clientRound,\r\n    }\r\n\r\n    ));\r\n    return result;\r\n  };\r\n};\r\n\r\nconst reHydrateStore = () => {\r\n  if (localStorage.getItem('persistStorage') !== null) {\r\n    // console.log('local hydarte', localStorage.getItem('persistStorage'))\r\n    return { ...JSON.parse(localStorage.getItem('persistStorage')) };\r\n  }\r\n}\r\n\r\nexport const store = createStore(\r\n  rootReducer,\r\n  reHydrateStore(),\r\n  composeWithDevTools(\r\n    applyMiddleware(\r\n      epicMiddleware,\r\n      localStorageMiddleware,\r\n    )\r\n  ),\r\n\r\n);\r\n\r\nepicMiddleware.run(rootEpic);","import React from 'react';\r\nimport classes from './Btn.module.scss';\r\n\r\nconst Btn = ({ children, color, customType, ...props }) => {\r\n    // add main isolated class\r\n    let classStr = classes.btn;\r\n    if (color) {\r\n        // add styling isolated class\r\n        classStr = `${classStr} ${classes['btn_' + color]}`\r\n    }\r\n    if (customType) {\r\n        // add styling isolated class\r\n        if (Array.isArray(customType)) {\r\n            customType.forEach((type) => {\r\n                classStr = `${classStr} ${classes['btn_' + type]}`\r\n            })\r\n        } else {\r\n            classStr = `${classStr} ${classes['btn_' + customType]}`\r\n        }\r\n    }\r\n    if (props.className) {\r\n        // add inherited (passed from outside) class\r\n        classStr = `${classStr} ${props.className}`\r\n    }\r\n    return (\r\n        <button {...props}\r\n            className={classStr}>\r\n            {children}\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default Btn;","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport Btn from '../ui/button/Btn';\r\n\r\nimport { storeUserFromToken, logout } from '../store/actions/auth.actions';\r\n// import { storeDataActions, storeDataSelectors } from '../store/entities/store-data-config';\r\n\r\nimport { userSelector } from '../store/reducers/auth.reducer';\r\n\r\n// import { gamerSelectors, gamerActions } from '../store/entities/gamer';\r\n\r\nimport { useBrakepoint } from '../hooks/useBrakepoint';\r\n\r\nimport {\r\n  faBars, faBarsStaggered, faHatCowboySide, faRightFromBracket,\r\n  faTrain, faUserAstronaut, faGears, faDoorClosed\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nexport default function HeaderComponent() {\r\n  const [showSideMenu, setshowSideMenu] = useState(false);\r\n  const user = useSelector(userSelector);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  // const gamerSelectors = storeDataSelectors.gamer;\r\n  // const gamerSelectAll = useSelector(gamerSelectors.selectAll);\r\n  // const gamerActions = storeDataActions.gamer;\r\n\r\n  const { size } = useBrakepoint();\r\n\r\n\r\n  // useEffect(() => {\r\n  //   console.log('size', size);\r\n  // }, [size]);\r\n\r\n  useEffect(() => {\r\n    dispatch(storeUserFromToken());\r\n    // dispatch({ type: 'gamer/addOne', payload: { _id: '12345', name: 'johns' } })\r\n    // dispatch(gamerActions.addOne({ _id: '125', name: 'jos' }));\r\n    // dispatch(gamerActions.getById('12345'));\r\n    // console.log('gamersSelector', gamerSelectAll)\r\n\r\n    // gamersSelectors.selectAll((x) => {\r\n    //   console.log('gamersSelectors', x);\r\n\r\n    // }\r\n    // );\r\n    // dispatch(actions.opponent.getOpponents());\r\n    // dispatch(actions.opponent.getOpponent('fsdfsdf'))\r\n\r\n  }, [dispatch])\r\n\r\n  // useEffect(() => {\r\n  //   console.log('gamersSelector', gamerSelectAll)\r\n  // }, [dispatch, gamerSelectAll])\r\n\r\n  const logoutHandler = (e) => {\r\n    e.preventDefault();\r\n    dispatch(logout());\r\n  }\r\n\r\n  const menuSideHandler = (e) => {\r\n    e.preventDefault();\r\n    setshowSideMenu((prev) => !prev)\r\n  }\r\n\r\n  return (\r\n    <header className=\"container header\">\r\n      <div className=\"header__logo\">\r\n        <NavLink className=\"menu__item menu-item\" end to=\"/\" >\r\n          {/* <FontAwesomeIcon className=\"menu-item__icon\" icon={faTrain} /> */}\r\n\r\n          <span>Scores</span>\r\n        </NavLink></div>\r\n      {(size === 'md' || size === 'lg' || size === 'xl')\r\n        && <div className=\"header__menu top-menu\">\r\n          <div className=\"top-menu__links\">\r\n            <NavLink className=\"top-menu__item menu-item\" end to=\"/games/train\" >\r\n              <FontAwesomeIcon className=\"menu-item__icon\" icon={faTrain} />\r\n              <span>Train</span>\r\n            </NavLink>\r\n            <NavLink className=\"top-menu__item menu-item\" end to=\"/games/thousand\" >\r\n              <FontAwesomeIcon className=\"menu-item__icon\" icon={faHatCowboySide} />\r\n              <span>Card Game</span>\r\n            </NavLink>\r\n          </div>\r\n          <div className=\"top-menu__divider\"></div>\r\n          <div className=\"top-menu__dashboard\">\r\n            {user && user.role && user.role === 'member' &&\r\n              <span className=\"top-menu__item menu-item\">\r\n                <FontAwesomeIcon className=\"menu-item__icon\" icon={faUserAstronaut} />\r\n                {user.name}</span>\r\n            }\r\n\r\n            <NavLink className=\"top-menu__item menu-item\" end to=\"/dashboard\" >\r\n              <FontAwesomeIcon className=\"menu-item__icon\" icon={faGears} />\r\n              <span>Dashboard</span>\r\n            </NavLink>\r\n\r\n\r\n            {user && user.role !== 'member' &&\r\n              <NavLink className=\"top-menu__item menu-item\" end to=\"/auth\" >\r\n                <FontAwesomeIcon className=\"menu-item__icon\" icon={faDoorClosed} />\r\n                <span>Signin</span>\r\n              </NavLink>\r\n            }\r\n\r\n            {user && user.role === 'member' &&\r\n              <Btn className=\"anchor top-menu__item menu-item\" type=\"button\" onClick={logoutHandler}>\r\n                <FontAwesomeIcon className=\"menu-item__icon\" icon={faRightFromBracket} />\r\n                <span>Logout</span>\r\n              </Btn>\r\n            }\r\n          </div>\r\n        </div>}\r\n\r\n      {(size === 'xs' || size === 'sm') && <div className=\"header__menu top-menu\">\r\n        <div className=\"top-menu__divider\"></div>\r\n        <div className=\"top-menu__btn\">\r\n          < Btn className=\"menu__item\" type=\"button\" onClick={menuSideHandler}>\r\n            {(size === 'xs' || size === 'sm') && !showSideMenu &&\r\n              <FontAwesomeIcon icon={faBars} />}\r\n            {(size === 'xs' || size === 'sm') && showSideMenu &&\r\n              <FontAwesomeIcon icon={faBarsStaggered} />}\r\n          </Btn>\r\n        </div>\r\n        {showSideMenu && <div className=\"menu__btn\">\r\n        </div>}\r\n      </div>}\r\n\r\n      {(size === 'xs' || size === 'sm') && showSideMenu &&\r\n        <div className=\"side-menu\" onClick={menuSideHandler}>\r\n          <div className=\"side-menu__links\">\r\n            <NavLink className=\"side-menu__item menu-item\" end to=\"/games/train\" >\r\n              <FontAwesomeIcon className=\"menu-item__icon\" icon={faTrain} />\r\n              <span>Train</span>\r\n            </NavLink>\r\n            <NavLink className=\"side-menu__item menu-item\" end to=\"/games/thousand\" >\r\n              <FontAwesomeIcon className=\"menu-item__icon\" icon={faHatCowboySide} />\r\n              <span>Card Game</span>\r\n            </NavLink>\r\n          </div>\r\n          <div className=\"side-menu__divider\"></div>\r\n          <div className=\"side-menu__dashboard\">\r\n            {user && user.role && user.role === 'member' &&\r\n              <span className=\"side-menu__item menu-item\">\r\n                <FontAwesomeIcon className=\"menu-item__icon\" icon={faUserAstronaut} />\r\n                {user.name}</span>\r\n            }\r\n\r\n            <NavLink className=\"side-menu__item menu-item\" end to=\"/dashboard\" >\r\n              <FontAwesomeIcon className=\"menu-item__icon\" icon={faGears} />\r\n              <span>Dashboard</span>\r\n            </NavLink>\r\n\r\n\r\n            {user && user.role !== 'member' &&\r\n              <NavLink className=\"side-menu__item menu-item\" end to=\"/auth\" >\r\n                <FontAwesomeIcon className=\"menu-item__icon\" icon={faDoorClosed} />\r\n                <span>Signin</span>\r\n              </NavLink>\r\n            }\r\n\r\n            {user && user.role === 'member' &&\r\n              <Btn className=\"anchor side-menu__item menu-item\" type=\"button\" onClick={logoutHandler}>\r\n                <FontAwesomeIcon className=\"menu-item__icon\" icon={faRightFromBracket} />\r\n                <span>Logout</span>\r\n              </Btn>\r\n            }\r\n          </div>\r\n        </div>}\r\n\r\n    </header >\r\n  )\r\n}\r\n\r\n","import { useState, useCallback, useEffect } from \"react\";\r\n\r\nexport const useBrakepoint = () => {\r\n\r\n  const [size, setSize] = useState(null);\r\n\r\n  // const BRAKEPOINT = {\r\n  //   xs: 0,\r\n  //   sm: 600,\r\n  //   md: 960,\r\n  //   lg: 1280,\r\n  //   xl: 1920,\r\n  // };\r\n\r\n  const createMediaString = (min, max) => {\r\n    if (min && !max) {\r\n      return `(min-width: ${min}px)`;\r\n    }\r\n    if (min && max) {\r\n      return `(min-width: ${min}px) and (max-width: ${max}px)`;\r\n    }\r\n    if (!min && max) {\r\n      return `(max-width: ${max}px)`;\r\n    }\r\n  }\r\n\r\n  const createMediaBrakepoints = (BRAKEPOINTS) => {\r\n    let brakepoints = {};\r\n    for (let point in BRAKEPOINTS) {\r\n      brakepoints[point] = createMediaString(...BRAKEPOINTS[point]);\r\n    }\r\n    return brakepoints;\r\n  }\r\n\r\n  const BRAKEPOINTS = {\r\n    xs: [null, 599],\r\n    sm: [600, 959],\r\n    md: [960, 1279],\r\n    lg: [1280, 1919],\r\n    xl: [1920, null]\r\n  };\r\n\r\n  const MEDIABRAKEPOINTS = createMediaBrakepoints(BRAKEPOINTS);\r\n\r\n  const checkWidth = useCallback(() => {\r\n    for (let media in MEDIABRAKEPOINTS) {\r\n      if (window.matchMedia(MEDIABRAKEPOINTS[media]).matches) {\r\n        setSize(media);\r\n      }\r\n    }\r\n  }, [MEDIABRAKEPOINTS])\r\n\r\n  useEffect(() => {\r\n    checkWidth()\r\n  }, [checkWidth]);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"resize\", checkWidth);\r\n    return () => {\r\n      window.removeEventListener(\"resize\", checkWidth);\r\n    }\r\n  }, [checkWidth])\r\n\r\n  return {\r\n    size\r\n  }\r\n}","import React from 'react';\r\n\r\nimport classes from './Inp.module.scss';\r\nconst Inp = ({ children, ...props }) => {\r\n    return (\r\n        <input  {...props}\r\n        className={props.className ? classes.inp + ' ' + props.className : classes.inp} />\r\n    )\r\n}\r\n\r\nexport default Inp;\r\n","import React, { useState } from 'react';\r\nimport Btn from '../ui/button/Btn';\r\nimport Inp from '../ui/input/Inp';\r\nimport { useDispatch } from 'react-redux';\r\nimport { signin } from '../store/actions/auth.actions';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function SigninComponent() {\r\n  const [name, setName] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const dispatch = useDispatch();\r\n  const authHandler = (e) => {\r\n    e.preventDefault();\r\n    dispatch(signin({ name: name, password: password }));\r\n  }\r\n\r\n  return (\r\n    <div className=\"container auth\">\r\n      <div className=\"row auth-header\">\r\n        <h2 className=\"cell auth-header__head\">Signin</h2>\r\n        <span className=\"cell auth-header__link\">\r\n          <Link to=\"/auth/signup\">or signup</Link>\r\n        </span>\r\n      </div>\r\n      <form className=\"row auth-form\">\r\n        <div className=\"auth-form__input\">\r\n          <label htmlFor=\"name\"\r\n            className=\"input-label\">Name</label>\r\n          <Inp id=\"name\"\r\n            placeholder=\"Name\"\r\n            type=\"text\" value={name}\r\n            onChange={(e) => setName(e.target.value)} />\r\n        </div>\r\n        <div className=\"auth-form__input\">\r\n          <label htmlFor=\"password\"\r\n            className=\"input-label\">Password</label>\r\n          <Inp id=\"password\"\r\n            placeholder=\"Password\"\r\n            type=\"password\" value={password}\r\n            onChange={(e) => setPassword(e.target.value)} />\r\n        </div>\r\n        <div className=\"auth-form__button\">\r\n          <Btn color=\"primary\" type=\"button\" onClick={authHandler}> Signin</Btn>\r\n        </div>\r\n      </form >\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from 'react';\r\nimport Btn from '../ui/button/Btn';\r\nimport Inp from '../ui/input/Inp';\r\nimport { useDispatch } from 'react-redux';\r\nimport { signup } from '../store/actions/auth.actions';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function SignupComponent() {\r\n  const [name, setName] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [passwordConfirm, setPasswordConfirm] = useState('');\r\n  const dispatch = useDispatch();\r\n\r\n  const authHandler = (e) => {\r\n    e.preventDefault();\r\n    dispatch(signup({ name: name, password: password }));\r\n    console.log('auth')\r\n  }\r\n\r\n  return (\r\n    <div className=\"container auth\">\r\n      <div className=\"row auth-header\">\r\n        <h2 className=\"cell auth-header__head\">Signup</h2>\r\n        <span className=\"cell auth-header__link\">\r\n          <Link to=\"/auth\">or signin</Link>\r\n        </span>\r\n      </div>\r\n      <form className=\"row auth-form\">\r\n        <div className=\"auth-form__input\">\r\n          <label htmlFor=\"name\"\r\n            className=\"input-label\">Name</label>\r\n          <Inp id=\"name\"\r\n            placeholder=\"Name\"\r\n            type=\"text\" value={name}\r\n            onChange={(e) => setName(e.target.value)} />\r\n        </div>\r\n        <div className=\"auth-form__input\">\r\n          <label htmlFor=\"password\"\r\n            className=\"input-label\">Password</label>\r\n          <Inp id=\"password\"\r\n            placeholder=\"Password\"\r\n            type=\"password\" value={password}\r\n            onChange={(e) => setPassword(e.target.value)} />\r\n        </div>\r\n        <div className=\"auth-form__input\">\r\n          <label htmlFor=\"passwordConfirm\"\r\n            className=\"input-label\">Confirm password</label>\r\n          <Inp id=\"passwordConfirm\"\r\n            placeholder=\"Confirm password\"\r\n            type=\"password\" value={passwordConfirm}\r\n            onChange={(e) => setPasswordConfirm(e.target.value)} />\r\n        </div>\r\n        <div className=\"auth-form__button\">\r\n          <Btn color=\"primary\" type=\"button\"\r\n            onClick={authHandler}\r\n            disabled={passwordConfirm !== password}\r\n          > Signup</Btn>\r\n        </div>\r\n      </form >\r\n    </div>\r\n  )\r\n}\r\n\r\n","// import React, { useEffect, useState, useCallback } from 'react';\r\n\r\n\r\nexport default function HomeComponent() {\r\n\r\n  return (\r\n    <div>\r\n      <h1>Home works</h1>\r\n    </div>\r\n  )\r\n}\r\n","// import React, { useEffect, useState, useCallback } from 'react';\r\n\r\nexport default function ThousandComponent() {\r\n  return (\r\n    <h1>Coming soon..</h1>\r\n  )\r\n\r\n}\r\n","import {\r\n  faRoute,\r\n  faMapMarkedAlt,\r\n  faSchool,\r\n  faTrain,\r\n  faUsers,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nexport const config = {\r\n  games: {\r\n    train: {\r\n      maxPlayersQty: 5,\r\n      playersColors: ['red', 'green', 'blue', 'black', 'yellow'],\r\n      routeMainScores: [20, 21],\r\n      routeLocalScores: [5, 6, 7, 8, 9, 10, 11, 12, 13],\r\n      cars: [\r\n        { qty: 1, score: 1 },\r\n        { qty: 2, score: 2 },\r\n        { qty: 3, score: 4 },\r\n        { qty: 4, score: 7 },\r\n        { qty: 6, score: 15 },\r\n        { qty: 8, score: 21 },\r\n      ],\r\n      rounds: [\r\n        {\r\n          path: 'start',\r\n          icon: faUsers,\r\n        },\r\n        {\r\n          path: 'routes',\r\n          icon: faMapMarkedAlt,\r\n        },\r\n        {\r\n          path: 'length',\r\n          icon: faRoute,\r\n        },\r\n        {\r\n          path: 'stations',\r\n          icon: faSchool,\r\n        },\r\n        {\r\n          path: 'cars',\r\n          icon: faTrain,\r\n        },\r\n\r\n      ]\r\n    }\r\n  }\r\n\r\n\r\n\r\n}","import React, { useMemo } from 'react';\r\nimport { config } from '../app-config';\r\nimport { NavLink, useParams } from \"react-router-dom\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { useSelector } from 'react-redux';\r\nimport { storeDataSelectors } from '../store/entities/store-data-config';\r\n\r\nexport default function RoundsMenuComponent({ gameType }) {\r\n  let { round } = useParams();\r\n  const clientGameSelectors = storeDataSelectors['clientGame'];\r\n  const clientGames = useSelector(clientGameSelectors.selectAll).filter((game) => game.type === gameType);\r\n\r\n  const activeRound = useMemo(() =>\r\n    config.games[gameType].rounds\r\n      .filter((roundCfg) => roundCfg.path === round)\r\n      .map((roundCfg) => ({ ...roundCfg, idx: config.games[gameType].rounds.indexOf(roundCfg) }))[0]\r\n    , [round, gameType]);\r\n  return (\r\n    <>\r\n      <div className=\"game__rounds-menu-top\"\r\n\r\n      ></div>\r\n\r\n      {activeRound && gameType && config.games[gameType].rounds && config.games[gameType].rounds.map(\r\n        (item, idx) =>\r\n          <NavLink disabled={(item.path === 'start' && clientGames && clientGames.length) ||\r\n            (item.path !== 'start' && clientGames && !clientGames.length)}\r\n\r\n            className={`rounds-menu__item\r\n          ${idx < activeRound.idx ? 'rounds-menu__item_passed' : ''}\r\n          ${idx > activeRound.idx ? 'rounds-menu__item_upcomming' : ''}\r\n          `}\r\n            key={item.path}\r\n            end to={'../' + item.path}\r\n          ><FontAwesomeIcon icon={item.icon} />\r\n          </NavLink>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n","import React from 'react';\r\n\r\nimport classes from './Sel.module.scss';\r\nconst Sel = ({ children, ...props }) => {\r\n    return (\r\n        <select\r\n            {...props}\r\n            className={props.className ?\r\n                classes.sel + ' ' + props.className\r\n                : classes.sel}>\r\n            {children}\r\n        </select>\r\n    )\r\n}\r\n\r\nexport default Sel;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faCircleXmark } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nconst colors = ['red', 'green', 'blue', 'black', 'yellow'];\r\nconst defaultColor = colors[0];\r\n\r\nexport default function SelectColorComponent({\r\n  color = defaultColor,\r\n  idx = 0,\r\n  filtredColors = colors,\r\n  selectColor,\r\n  getDefaultColor = () => {} }) {\r\n\r\n  const [showSelectColor, setShowSelectColor] = useState(false);\r\n\r\n  const switchSelectColorHandler = () => setShowSelectColor((prev) => !prev);\r\n\r\n  // run once to pass default color to parent component\r\n  useEffect(() => { getDefaultColor(color, idx) }, [color, getDefaultColor, idx]);\r\n\r\n  const selectHandler = (color) => selectColor(color, idx);\r\n  return (\r\n    <div className=\"select-color\"\r\n      style={{ 'backgroundColor': color }}\r\n      onClick={() => switchSelectColorHandler(idx)}>\r\n\r\n      {showSelectColor && <div className=\"select-color__popup select-color-popup\">\r\n        <FontAwesomeIcon className=\"select-color-popup__close-icon\" icon={faCircleXmark} />\r\n        {filtredColors.map((color) =>\r\n          <div className=\"select-color-popup__item\"\r\n            key={color} style={{ 'backgroundColor': color }}\r\n            onClick={() => selectHandler(color)}>\r\n          </div>\r\n        )}\r\n      </div>}\r\n    </div>\r\n  );\r\n}","import React, { useState } from 'react';\r\nimport Inp from '../ui/input/Inp';\r\nimport Btn from '../ui/button/Btn';\r\nimport SelectColorComponent from './SelectColor.component';\r\n\r\nexport default function CreateGamerComponent({createGamer}) {\r\n  const [name, setName] = useState('');\r\n  const [color, setColor] = useState(undefined);\r\n\r\n  const create = () => {\r\n    createGamer({name, color});\r\n  }\r\n\r\n  const close = () => {\r\n    createGamer(null);\r\n  }\r\n\r\n  const selectColor = (color) => {\r\n    setColor(color);\r\n  }\r\n\r\n  const getDefaultColor = (color) => {\r\n    setColor(color);\r\n  }\r\n\r\n  return (\r\n    <div className=\"create-gamer\">\r\n      <div className=\"create-gamer__background\">\r\n      </div>\r\n      <div className=\"create-gamer__modal\">\r\n        <form className=\"create-gamer-form\">\r\n          <div className=\"create-gamer-form__item\">\r\n            <h3 className=\"heading-text\">Create gamer</h3>\r\n          </div>\r\n          <div className=\"create-gamer-form__item\">\r\n            <div className=\"create-gamer-form__select-color\">\r\n              <SelectColorComponent\r\n                color={color}\r\n                // idx={idx}\r\n                // filtredColors={colors}\r\n                getDefaultColor={getDefaultColor}\r\n                selectColor={selectColor} />\r\n            </div>\r\n            <div className=\"create-gamer-form__input\">\r\n              {/* <label htmlFor=\"name\"\r\n            className=\"input-label\">Name</label> */}\r\n              <Inp id=\"name\"\r\n                placeholder=\"Name\"\r\n                type=\"text\" value={name}\r\n                onChange={(e) => setName(e.target.value)} />\r\n            </div>\r\n          </div>\r\n          <div className=\"create-gamer-form__item\">\r\n            <div className=\"create-gamer-form__btns\">\r\n              <Btn color=\"primary\" type=\"button\" disabled={!name} onClick={create}>Create</Btn>\r\n              <Btn color=\"secondary\" type=\"button\" onClick={close}>Close</Btn>\r\n\r\n            </div>\r\n          </div>\r\n        </form >\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","import { useEffect, useState, useMemo } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { storeDataActions, storeDataSelectors } from '../store/entities/store-data-config';\r\nimport Btn from '../ui/button/Btn';\r\nimport Sel from '../ui/select/Sel';\r\nimport { config } from '../app-config';\r\nimport {\r\n  faMinus,\r\n  // faCircleXmark\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport CreateGamerComponent from './CreateGamer.component';\r\nimport SelectColorComponent from './SelectColor.component';\r\nimport { useCallback } from 'react';\r\n\r\n// const { playersColors, maxPlayersQty }= config.games.train;\r\n\r\nexport default function ChooseGamersComponent() {\r\n  const dispatch = useDispatch();\r\n  const gamerSelectors = storeDataSelectors['gamer'];\r\n  const recentPlayerSelectors = storeDataSelectors['recentPlayer'];\r\n  const clientPlayerSelectors = storeDataSelectors['clientPlayer'];\r\n  const clientRoundSelectors = storeDataSelectors['clientRound'];\r\n  const gamers = useSelector(gamerSelectors.selectAll);\r\n  const recentPlayers = useSelector(recentPlayerSelectors.selectAll);\r\n  const clientPlayers = useSelector(clientPlayerSelectors.selectAll);\r\n  const maxPlayersQty = useMemo(() => config.games.train.maxPlayersQty, []);\r\n  const playersColors = useMemo(() => config.games.train.playersColors, []);\r\n  // const [players, setPlayers] = useState([]);\r\n  const [filtredGamers, setFiltredGamers] = useState([]);\r\n  const [filtredColors, setFiltredColors] = useState(playersColors);\r\n  const [showCreateGamer, setShowCreateGamer] = useState(false);\r\n\r\n  const gamerActions = storeDataActions['gamer'];\r\n  const recentPlayerActions = storeDataActions['recentPlayer'];\r\n  const clientPlayerActions = storeDataActions['clientPlayer'];\r\n  const gameActions = storeDataActions['game'];\r\n  const clientGameActions = storeDataActions['clientGame'];\r\n  const clientRoundActions = storeDataActions['clientRound'];\r\n\r\n  const setPlayersToStore = useCallback((players) => {\r\n    // dispatch(clientPlayerActions.removeAll());\r\n    // dispatch(clientPlayerActions.addMany(clientPlayers));\r\n    dispatch(clientPlayerActions.setAll(players));\r\n  }, [dispatch, clientPlayerActions])\r\n\r\n  useEffect(() => {\r\n    setPlayersToStore(recentPlayers);\r\n    // setPlayers(recentPlayers);\r\n  }, [recentPlayers, setPlayersToStore]);\r\n\r\n  useEffect(() => {\r\n    dispatch(gamerActions.getAll());\r\n  }, [dispatch, gamerActions, recentPlayerActions]);\r\n\r\n  // const players_ids = useMemo(() => clientPlayers.map((player) => player._id), [clientPlayers]);\r\n\r\n  const addPlayerHandler = () => {\r\n    const preferredColor = filtredGamers[0].color;\r\n    if (filtredColors.includes(preferredColor)) {\r\n      return setPlayersToStore([...clientPlayers, filtredGamers[0]]);\r\n      // return setPlayers([...players, filtredGamers[0]]);\r\n    }\r\n    setPlayersToStore([...clientPlayers, { ...filtredGamers[0], color: filtredColors[0] }]);\r\n    // setPlayers([...players, { ...filtredGamers[0], color: filtredColors[0] }]);\r\n  }\r\n\r\n  // const removePlayerHandler = (idx) => setPlayers(players.filter((_, i) => i !== idx));\r\n  // const removeAllPlayersHandler = (idx) => setPlayers([]);\r\n  const removePlayerHandler = (idx) => setPlayersToStore(clientPlayers.filter((_, i) => i !== idx));\r\n  const removeAllPlayersHandler = (idx) => setPlayersToStore([]);\r\n\r\n  const startGameHandler = () => {\r\n    const scores = clientPlayers.map((player) => ({\r\n      ...player,\r\n      // scores: function () {\r\n      //   console.log('this', this)\r\n      //   return this.scoresLine.reduce((prev, cur) => prev + cur, 0)\r\n      // },\r\n      scoresLine: []\r\n    }));\r\n\r\n\r\n    const players = clientPlayers.map((player) => ({\r\n      _id: player._id,\r\n      // scores: function () {\r\n      //   console.log('this', this)\r\n      //   return this.scoresLine.reduce((prev, cur) => prev + cur, 0)\r\n      // },\r\n      scoresLine: []\r\n    }));\r\n\r\n    const stationsRoundPlayers = clientPlayers.map((player) => ({\r\n      _id: player._id,\r\n      // scores: function () {\r\n      //   console.log('this', this)\r\n      //   return this.scoresLine.reduce((prev, cur) => prev + cur, 0)\r\n      // },\r\n      scoresLine: [12]\r\n    }));\r\n\r\n    const clientRounds = [\r\n      { _id: 'start', players },\r\n      { _id: 'routes', players },\r\n      { _id: 'length', players },\r\n      { _id: 'stations', players: stationsRoundPlayers},\r\n      { _id: 'cars', players },\r\n    ]\r\n\r\n\r\n    // const scores = players;\r\n    const clientGame = {\r\n      _id: uuidv4(),\r\n      type: 'train',\r\n      // players: players_ids,\r\n      // rounds: {\r\n      //   start: rounds,\r\n      //   routes: rounds,\r\n      //   length: rounds,\r\n      // }\r\n    };\r\n\r\n    console.log('clientGame', clientGame);\r\n\r\n\r\n    // const game = {\r\n    //   _id: uuidv4(),\r\n    //   type: 'train',\r\n    //   clientPlayers,\r\n    //   rounds: {\r\n    //     start: scores,\r\n    //     routes: scores,\r\n    //     length: scores,\r\n    //   }\r\n\r\n    // };\r\n\r\n    // dispatch(gameActions.removeAll());\r\n    // dispatch(gameActions.addOne(game));\r\n    // dispatch(gameActions.setAll([game]));\r\n    // dispatch(clientGameActions.removeAll());\r\n    // dispatch(clientGameActions.addOne(clientGame));\r\n    dispatch(clientGameActions.setAll([clientGame]));\r\n    dispatch(recentPlayerActions.setAll(clientPlayers));\r\n    dispatch(clientRoundActions.setAll(clientRounds));\r\n\r\n    // dispatch(recentPlayerActions.removeAll());\r\n    // dispatch(recentPlayerActions.addMany(clientPlayers));\r\n  }\r\n\r\n  useEffect(() => {\r\n    const filtredGamers = gamers.filter((gamer) => {\r\n      for (let i = 0; i < clientPlayers.length; i++) {\r\n        if (clientPlayers[i]._id === gamer._id) {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    });\r\n    setFiltredGamers(filtredGamers);\r\n  }, [clientPlayers, gamers]);\r\n\r\n  useEffect(() => {\r\n    const filtredColors = playersColors.filter((color) => {\r\n      for (let i = 0; i < clientPlayers.length; i++) {\r\n        if (clientPlayers[i].color === color) {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    });\r\n    setFiltredColors(filtredColors);\r\n  }, [clientPlayers, playersColors]);\r\n\r\n\r\n  // const selectPlayerHandler = (idx) => (e) => setPlayers(players.map((player, i) => {\r\n  const selectPlayerHandler = (idx) => (e) => setPlayersToStore(clientPlayers.map((player, i) => {\r\n    if (idx === i) {\r\n      const selectedPlayer = filtredGamers.filter((gamer) => gamer._id === e.target.value)[0];\r\n      const preferredColor = selectedPlayer.color;\r\n      if (filtredColors.includes(preferredColor)) {\r\n        return selectedPlayer;\r\n      }\r\n      return { ...selectedPlayer, color: filtredColors[0] };\r\n    }\r\n    return player;\r\n  }));\r\n\r\n  const selectColor = (color, idx) =>\r\n    setPlayersToStore(\r\n      clientPlayers.map((player, i) => idx === i ? { ...player, color } : player)\r\n    )\r\n  // setPlayers(\r\n  //   players.map((player, i) => idx === i ? { ...player, color } : player)\r\n  // )\r\n\r\n  const createGamer = (gamer) => {\r\n    setShowCreateGamer(false);\r\n    if (!gamer) {\r\n      return;\r\n    }\r\n\r\n    // const { color, name } = gamer;\r\n    dispatch(gamerActions.add(gamer));\r\n    // console.log('create gamer color ', color, 'name ', name);\r\n  }\r\n\r\n  const createGamerHandler = () => {\r\n    setShowCreateGamer(true);\r\n  }\r\n  // const switchSelectColorHandler = (idx) => setShowSelectColor((prev) => prev ? !prev : idx + 1);\r\n\r\n  return (\r\n    <div className=\"container choose-gamers\">\r\n      <div className=\"row choose-gamers__header\">\r\n        <h2 className=\"heading-text\">Choose gamers</h2>\r\n\r\n      </div>\r\n      {clientPlayers.map((player, idx) =>\r\n        <div key={player._id} className=\"row row_nowrap choose-gamers__form choose-gamers-form\">\r\n          <div className=\"choose-gamers-form__select-color\">\r\n            <SelectColorComponent\r\n              color={player.color} idx={idx}\r\n              filtredColors={filtredColors}\r\n              selectColor={selectColor} />\r\n          </div>\r\n          <Sel className=\"choose-gamers-form__select-name\"\r\n            onChange={selectPlayerHandler(idx)} value={clientPlayers[idx]._id}>\r\n            <option value={player._id} key={player._id}>{player.name}</option>\r\n            {filtredGamers.map((gamer) =>\r\n              <option value={gamer._id} key={gamer._id}>{gamer.name}</option>\r\n            )}\r\n          </Sel>\r\n          <Btn className=\"choose-gamers-form__remove-gamer\" customType=\"icon\"\r\n            color=\"danger\" type=\"button\" onClick={() => removePlayerHandler(idx)}>\r\n            <FontAwesomeIcon icon={faMinus} />\r\n          </Btn>\r\n        </div >\r\n      )}\r\n      <div className=\"row choose-gamers__btns\">\r\n        <Btn color=\"danger\" className=\"choose-gamers-btns__item\"\r\n          type=\"button\" disabled={!filtredGamers.length || clientPlayers.length >= maxPlayersQty}\r\n          onClick={addPlayerHandler}>Add</Btn>\r\n        <Btn color=\"secondary\" className=\"choose-gamers-btns__item\"\r\n          type=\"button\"\r\n          onClick={createGamerHandler}>Create</Btn>\r\n        <Btn color=\"danger\" className=\"choose-gamers-btns__item\"\r\n          type=\"button\" disabled={!clientPlayers.length}\r\n          onClick={removeAllPlayersHandler}>Remove All</Btn>\r\n      </div>\r\n\r\n      {clientPlayers && clientPlayers.length > 1 && <div className=\"row choose-gamers__submit\">\r\n        <Btn color=\"primary\" type=\"button\" onClick={startGameHandler}>Start game</Btn>\r\n      </div>}\r\n\r\n      {showCreateGamer && <CreateGamerComponent createGamer={createGamer} />}\r\n    </div >\r\n  )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { useParams } from \"react-router-dom\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport {\r\n  useDispatch,\r\n  useSelector\r\n} from 'react-redux';\r\nimport {\r\n  faMinus, faPlus, faSubway,\r\n  // faCircleXmark\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  storeDataActions,\r\n  storeDataSelectors\r\n} from '../../store/entities/store-data-config';\r\nimport Btn from '../../ui/button/Btn';\r\nimport { config } from '../../app-config';\r\nimport { useEffect } from 'react';\r\nconst { routeMainScores } = config.games.train;\r\nconst { routeLocalScores } = config.games.train;\r\nconst { cars } = config.games.train;\r\n// const round = 'routes';\r\n\r\nexport default function TrainRoundsComponent() {\r\n  const dispatch = useDispatch();\r\n  const { round } = useParams();\r\n\r\n  const gameActions = storeDataActions['game'];\r\n  const clientGameActions = storeDataActions['clientGame'];\r\n  const clientRoundActions = storeDataActions['clientRound'];\r\n  const gameSelectors = storeDataSelectors['game'];\r\n  const clientGameSelectors = storeDataSelectors['clientGame'];\r\n  const clientRoundSelectors = storeDataSelectors['clientRound'];\r\n  const clientPlayerSelectors = storeDataSelectors['clientPlayer'];\r\n  const game = useSelector(gameSelectors.selectAll)[0];\r\n  const clientGame = useSelector(clientGameSelectors.selectAll)[0];\r\n  const clientRounds = useSelector(clientRoundSelectors.selectAll);\r\n  const clientRound = useSelector(state => clientRoundSelectors.selectById(state, round));\r\n  const clientPlayers = useSelector(clientPlayerSelectors.selectAll);\r\n  const [longestRoute, setLongestRoute] = useState(0);\r\n\r\n  const getPlayerColor = (player_id) => clientPlayers.find((player) => player._id === player_id).color;\r\n  const getPlayerName = (player_id) => clientPlayers.find((player) => player._id === player_id).name;\r\n  const getCarQtyByScore = (score) => cars.find((car) => car.score === score).qty;\r\n\r\n  const calcQtyOfArrItems = (player_id, item) => {\r\n    let count = 0;\r\n    clientRound.players\r\n      .map((player) => {\r\n        if (player._id === player_id) {\r\n          player.scoresLine.forEach((arrItem) => {\r\n            if (arrItem === item) {\r\n              count++\r\n            }\r\n          })\r\n        }\r\n      });\r\n    return count;\r\n  }\r\n  const calcScores = (scoresLine) => {\r\n    console.log('scoresLine', scoresLine)\r\n    return scoresLine.reduce((prev, cur) => prev + cur, 0)\r\n  }\r\n\r\n  const calcTotalScores = (player_id) => {\r\n    let sum = 0;\r\n    console.log('clientRounds', clientRounds)\r\n    clientRounds.forEach((round) => {\r\n      console.log('round', round)\r\n\r\n      round.players.forEach((player) => {\r\n        if (player._id === player_id) {\r\n          sum += player.scoresLine.reduce((prev, cur) => prev + cur, 0)\r\n        }\r\n      })\r\n    })\r\n    return sum;\r\n  }\r\n\r\n  const scoresLineUpdateHandler = (data) => {\r\n    const { score, player_id } = data;\r\n    const changes = clientRound.players\r\n      .map((player) => {\r\n        if (player._id === player_id) {\r\n          return { ...player, scoresLine: [score] };\r\n        }\r\n        return { ...player, scoresLine: [] };\r\n      })\r\n    dispatch(clientRoundActions.updateOne({\r\n      id: round,\r\n      changes: {\r\n        // ...clientRound,\r\n        players: changes,\r\n      }\r\n    }));\r\n  }\r\n\r\n  const scoresLineAddHandler = (data) => {\r\n    const { score, player_id } = data;\r\n    const changes = clientRound.players\r\n      .map((player) => {\r\n        if (player._id === player_id) {\r\n          return { ...player, scoresLine: [...player.scoresLine, score] };\r\n        }\r\n        return player;\r\n      })\r\n    dispatch(clientRoundActions.updateOne({\r\n      id: round,\r\n      changes: {\r\n        // ...clientRound,\r\n        players: changes,\r\n      }\r\n    }));\r\n  }\r\n\r\n  const scoresLineRemoveHandler = (data) => {\r\n    const { score, player_id } = data;\r\n    console.log('game', game)\r\n    const changes = clientRound.players\r\n      .map((player) => {\r\n        if (player._id === player_id) {\r\n          const scoresLine = [...player.scoresLine];\r\n          const index = scoresLine.indexOf(score);\r\n          scoresLine.splice(index, 1);\r\n          if (index !== -1) {\r\n            return { ...player, scoresLine };\r\n          }\r\n        }\r\n        return player;\r\n      })\r\n    dispatch(clientRoundActions.updateOne({\r\n      id: round,\r\n      changes: {\r\n        players: changes,\r\n      }\r\n    }));\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* <h3 className=\"round__title\">Points for routes</h3> */}\r\n      <div className=\"round__body\">\r\n        {clientRound && clientRound.players.map((player) =>\r\n          <div className=\"round__item round-item\" key={player._id} >\r\n            <div className=\"round-item__summary\">\r\n              <h4 className=\"round-item__summary-name\" style={{ color: getPlayerColor(player._id) }}>{getPlayerName(player._id)}</h4>\r\n              <h5 className=\"round-item__summary-scores\">\r\n                <span>This round: {calcScores(player.scoresLine)} </span>\r\n                <span>Total: {calcTotalScores(player._id)} </span>\r\n              </h5>\r\n            </div>\r\n            {clientRound._id === 'routes' && <div className='round-item__gameplay gameplay' >\r\n              <div className=\"gameplay__visualization gameplay__visualization_routes\">\r\n                {player.scoresLine.map((score) =>\r\n                  <Btn customType=\"narrow\" color={score > 19 ? \"route-main\" : \"route-local\"}\r\n                    key={uuidv4()}\r\n                    onClick={() => scoresLineRemoveHandler({ score, player_id: player._id })}>\r\n                    {score}</Btn>)}\r\n              </div>\r\n              <div className=\"gameplay__tools\">\r\n                {routeMainScores && routeMainScores.map((score) =>\r\n                  <Btn color=\"route-main\" customType=\"narrow\" key={score} onClick={() => scoresLineAddHandler({ score, player_id: player._id })}>{score}</Btn>)}\r\n                {routeLocalScores && routeLocalScores.map((score) =>\r\n                  <Btn color=\"route-local\" customType=\"narrow\" key={score} onClick={() => scoresLineAddHandler({ score, player_id: player._id })}>{score}</Btn>)}\r\n              </div>\r\n            </div>}\r\n\r\n            {clientRound._id === 'length' && <div className='round-item__gameplay gameplay' >\r\n              <div className=\"gameplay__visualization gameplay__visualization_length\"\r\n                onClick={() => scoresLineUpdateHandler({ player_id: player._id, score: 10 })}>\r\n                {player.scoresLine.length\r\n                  ?\r\n                  <Btn color='primary' className='length length_longest'>\r\n                    <FontAwesomeIcon className=\"gameplay__car-btn_icon\" icon={faSubway} />\r\n                    <span className=\"dbl-icon-btn__text\">Longest route</span>\r\n                    <FontAwesomeIcon className=\"gameplay__car-btn_icon\" icon={faSubway} />\r\n                  </Btn>\r\n                  :\r\n                  <Btn className='length length_short'>Mark as longest route</Btn>\r\n                }\r\n              </div>\r\n            </div>}\r\n\r\n            {clientRound._id === 'stations' && <div className='round-item__gameplay gameplay' >\r\n              <div className=\"gameplay__visualization gameplay__visualization_stations\" >\r\n                <Btn color='primary' customType=\"sticky-left\" disabled={player.scoresLine.length > 3}\r\n                  onClick={() => scoresLineAddHandler({ score: -4, player_id: player._id })}>\r\n                  <FontAwesomeIcon className=\"gameplay__car-btn_icon\" icon={faPlus} />\r\n                </Btn>\r\n                <Btn color='primary' customType=\"sticky\">\r\n                  <span className=\"dbl-icon-btn__text\">Used: {player.scoresLine.length - 1}</span>\r\n                  <FontAwesomeIcon className=\"gameplay__car-btn_icon\" icon={faSubway} />\r\n                </Btn>\r\n                <Btn color='primary' customType=\"sticky-right\" disabled={player.scoresLine.length < 2}\r\n                  onClick={() => scoresLineRemoveHandler({ score: -4, player_id: player._id })}>\r\n                  <FontAwesomeIcon className=\"gameplay__car-btn_icon\" icon={faMinus} />\r\n                </Btn>\r\n              </div>\r\n            </div>}\r\n\r\n            {clientRound._id === 'cars' && <div className='round-item__gameplay gameplay' >\r\n              <div className=\"gameplay__visualization gameplay__visualization_cars\">\r\n                {cars.map((car) =>\r\n                  <div className=\"car\" key={uuidv4()}>\r\n                    <Btn color={getPlayerColor(player._id)}\r\n                      customType={['sticky-left', 'narrow']}\r\n                      onClick={() => scoresLineAddHandler({ score: car.score, player_id: player._id })}>\r\n                      <FontAwesomeIcon icon={faPlus} />\r\n                    </Btn>\r\n                    <Btn color={getPlayerColor(player._id)}\r\n                      customType={['sticky', 'narrow']}>\r\n                      <FontAwesomeIcon className=\"dbl-icon-btn__icon\" icon={faSubway} />\r\n\r\n                      <span className=\"dbl-icon-btn__text\">{car.qty}</span>\r\n                    </Btn>\r\n                    <Btn color={getPlayerColor(player._id)}\r\n                      customType={['sticky-right', 'narrow']}\r\n                      onClick={() => scoresLineRemoveHandler({ score: car.score, player_id: player._id })}>\r\n                      <FontAwesomeIcon icon={faMinus} />\r\n                    </Btn>\r\n                    <span className='dbl-icon-btn__text'>{calcQtyOfArrItems(player._id, car.score)}</span>\r\n                  </div>\r\n\r\n\r\n\r\n                  // <Btn\r\n                  //   color={getPlayerColor(player._id)}\r\n                  //   customType=\"narrow\"\r\n                  //   key={uuidv4()}\r\n                  //   onClick={() => scoresLineRemoveHandler({ score: score, player_id: player._id })}>\r\n                  //   {Array(getCarQtyByScore(score)).fill('').map((_) =>\r\n                  //     <FontAwesomeIcon key={uuidv4()} className=\"gameplay__car-btn_icon\" icon={faSubway} />\r\n                  //   )}\r\n                  //   <span className=\"gameplay__car-btn_text\">{getCarQtyByScore(score)}</span>\r\n                  // </Btn>\r\n                )}\r\n              </div>\r\n              {/* <div className=\"gameplay__tools\">\r\n                {cars && cars.map((car) =>\r\n                  <Btn\r\n                    color={getPlayerColor(player._id)}\r\n                    customType=\"narrow\"\r\n                    key={car.qty}\r\n                    onClick={() => scoresLineAddHandler({ score: car.score, player_id: player._id })}\r\n                  >\r\n                    <FontAwesomeIcon key={uuidv4()} className=\"gameplay__car-btn_icon\" icon={faSubway} />\r\n                    <span className=\"gameplay__car-btn_text\">{car.qty}</span>\r\n                  </Btn>)}\r\n              </div> */}\r\n            </div>}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n\r\n    </>\r\n\r\n  )\r\n\r\n}\r\n","// import React, { useEffect, useState, useCallback } from 'react';\r\nimport { Navigate } from \"react-router-dom\";\r\n\r\nexport default function RouteGuard({ children, redirect, canActivate}) {\r\n\r\n  if (canActivate) {\r\n    return children\r\n  }\r\n  return <Navigate to={redirect} />\r\n}\r\n","import React, { useEffect, useMemo } from 'react';\r\nimport { Routes, Route, useNavigate, useParams } from \"react-router-dom\";\r\nimport Btn from '../../ui/button/Btn';\r\nimport { config } from '../../app-config';\r\n\r\nimport RoundsMenuComponent from '../RoundsMenu';\r\nimport ChooseGamersComponent from '../ChooseGamers.component';\r\nimport TrainRoundsComponent from './TrainRounds.component';\r\n// import Round2LengthComponent from './trainRounds/round2-length.component';\r\n// import Round3StationsComponent from './trainRounds/round3-stations.component';\r\n// import Round4CarsComponent from './trainRounds/round4-cars.component';\r\nimport RouteGuard from '../custom/RouteGuard';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { storeDataActions, storeDataSelectors } from '../../store/entities/store-data-config';\r\n\r\nexport default function TrainComponent() {\r\n  const dispatch = useDispatch();\r\n  const round = useParams()['*'];\r\n  let navigate = useNavigate();\r\n  const availablePaths = useMemo(() =>\r\n    config.games.train.rounds.map((round) => round.path),\r\n    []);\r\n\r\n  useEffect(() => {\r\n    if (!round || !availablePaths.includes(round)) {\r\n      navigate(availablePaths[1], { replace: true })\r\n    }\r\n  }, [navigate, round, availablePaths])\r\n\r\n\r\n  const clientGameActions = storeDataActions['clientGame'];\r\n  const gameActions = storeDataActions['game'];\r\n  const clientGameSelectors = storeDataSelectors['clientGame'];\r\n  const clientRoundSelectors = storeDataSelectors['clientRound'];\r\n  const clientPlayerSelectors = storeDataSelectors['clientPlayer'];\r\n\r\n  const clientPlayers = useSelector(clientPlayerSelectors.selectAll);\r\n  const clientGames = useSelector(clientGameSelectors.selectAll).filter((game) => game.type === 'train');\r\n  const clientRounds = useSelector(clientRoundSelectors.selectAll);\r\n\r\n  const routes = [\r\n    {\r\n      path: 'start',\r\n      element: <RouteGuard redirect={'../' + availablePaths[1]}\r\n        canActivate={clientGames && !clientGames.length}>\r\n        < ChooseGamersComponent />\r\n      </RouteGuard>,\r\n      exact: 'true'\r\n    },\r\n    {\r\n      path: ':round',\r\n      element: <RouteGuard redirect=\"../start\" canActivate={clientGames && clientGames.length}>\r\n        < TrainRoundsComponent />\r\n      </RouteGuard>,\r\n      exact: 'true'\r\n    },\r\n    {\r\n      index: true,\r\n      element: <RouteGuard redirect=\"../start\" canActivate={clientGames && clientGames.length}>\r\n        < TrainRoundsComponent />\r\n      </RouteGuard>,\r\n      exact: 'true'\r\n    },\r\n  ];\r\n\r\n  const calcTotalScores = (player_id) => {\r\n    let sum = 0;\r\n    console.log('clientRounds', clientRounds)\r\n    clientRounds.forEach((round) => {\r\n      console.log('round', round)\r\n\r\n      round.players.forEach((player) => {\r\n        if (player._id === player_id) {\r\n          sum += player.scoresLine.reduce((prev, cur) => prev + cur, 0)\r\n        }\r\n      })\r\n    })\r\n    return sum;\r\n  }\r\n  const getPlayerColor = (player_id) => clientPlayers.find((player) => player._id === player_id).color;\r\n  const getPlayerName = (player_id) => clientPlayers.find((player) => player._id === player_id).name;\r\n\r\n  const endGameHandler = (finish) => {\r\n    const clientRoundsWithTotal = clientRounds.map((round) => {\r\n    const players = round.players.map((player) => {\r\n      return {\r\n        _id: player._id,\r\n        score: player.scoresLine.reduce((prev, cur) => prev + cur, 0)\r\n      }\r\n    });\r\n    return { ...round, players }\r\n  })\r\n    const game = {\r\n      type: clientGames[0].type,\r\n      rounds: clientRoundsWithTotal,\r\n    }\r\n    // if game finished save to db\r\n    if (finish) {\r\n      dispatch(gameActions.add(game));\r\n    }\r\n    // clear game from storage\r\n    dispatch(clientGameActions.removeAll());\r\n  }\r\n\r\n  return (\r\n    <div className=\"game\">\r\n      <div className=\"game__rounds-menu rounds-menu\">\r\n        <Routes>\r\n          <Route path=\":round\"\r\n            element={<RoundsMenuComponent gameType=\"train\" />}\r\n            exact=\"true\"\r\n          >\r\n          </Route>\r\n        </Routes>\r\n      </div>\r\n\r\n      <div className=\"game__content container\">\r\n        <div className=\"game-content__header game-content-header\">\r\n          <h1 className=\"game-content-header__title heading-text\">Train</h1>\r\n          <div className=\"game-content-header__btn\">\r\n            {clientGames && clientGames.length > 0 &&\r\n              <Btn\r\n                color=\"danger\" type=\"button\" onClick={() => endGameHandler(false)}>\r\n                Cancel game\r\n              </Btn>}\r\n            {clientGames && clientGames.length > 0 &&\r\n              <Btn\r\n                color=\"danger\" type=\"button\" onClick={() => endGameHandler(true)}>\r\n                Finish game\r\n              </Btn>}\r\n          </div>\r\n          <div className=\"game-content-header__summary\">\r\n\r\n            {clientPlayers && clientPlayers.map((player) => {\r\n              return <div style={{ color: getPlayerColor((player._id))}}>\r\n                {getPlayerName(player._id)} {calcTotalScores(player._id)}\r\n              </div>\r\n              })}\r\n          </div>\r\n        </div>\r\n        {/* <div className=\"game-content__summary\">\r\n          summary\r\n        </div> */}\r\n        <div className=\"game-content__round round\">\r\n          <Routes>\r\n            {routes.map((route) => <Route {...route} key={uuidv4()} />)}\r\n          </Routes>\r\n        </div>\r\n      </div>\r\n    </div >\r\n  )\r\n}","import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { userSelector } from '../../store/reducers/auth.reducer';\r\nimport { storeDataActions, storeDataSelectors } from '../../store/entities/store-data-config';\r\n\r\nexport default function DashboardComponent() {\r\n\r\n\r\n  const gamerActions = storeDataActions['gamer'];\r\n  const gamerSelectors = storeDataSelectors['gamer'];\r\n\r\n  const trainGameActions = storeDataActions['trainGame'];\r\n  const trainGameSelectors = storeDataSelectors['trainGame'];\r\n\r\n  const dispatch = useDispatch();\r\n  const user = useSelector(userSelector);\r\n  const gamers = useSelector(gamerSelectors.selectAll);\r\n  const trainGames = useSelector(trainGameSelectors.selectAll);\r\n\r\n  useEffect(() => {\r\n    dispatch(gamerActions.getAll());\r\n  }, [dispatch, gamerActions]);\r\n\r\n  useEffect(() => {\r\n    dispatch(trainGameActions.getAll());\r\n  }, [dispatch, trainGameActions]);\r\n\r\n  return (\r\n    <div>\r\n      <h1>User {user && user.role}</h1>\r\n      <ul>\r\n        <li>Gamers</li>\r\n        {gamers && gamers.map((gamer) => {\r\n          return <li key={gamer._id}>{gamer.name}</li>\r\n        })}\r\n      </ul>\r\n      <ul>\r\n        <li>Train Games</li>\r\n        {trainGames && trainGames.map((game) => {\r\n          return <li key={game._id}>{game.type}</li>\r\n        })}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n","\r\nimport { Routes, Route, Navigate } from \"react-router-dom\";\r\nimport { useSelector } from 'react-redux';\r\nimport SigninComponent from \"./components/Signin.component\";\r\nimport SignupComponent from \"./components/Signup.component\";\r\nimport HomeComponent from './components/Home.component';\r\nimport ThousandComponent from './components/games/Thousand.component';\r\nimport TrainComponent from './components/games/Train.component';\r\nimport DashboardComponent from './components/dashboard/Dashboard.component';\r\n\r\nexport default function AppRouterComponent() {\r\n  const userSelector = useSelector((state) => state.auth.user);\r\n  \r\n  const privateRoutes = [\r\n    { path: '/', element: < HomeComponent />, exact: 'true' },\r\n    { path: '/games/thousand', element: < ThousandComponent />, exact: 'true' },\r\n    { path: '/games/train/*', element: < TrainComponent />, exact: 'true' },\r\n    { path: '/dashboard', element: < DashboardComponent />, exact: 'true' },\r\n    { path: '*', element: <Navigate to=\"/\" />, exact: 'true' },\r\n  ];\r\n\r\n  const publicRoutes = [\r\n    { path: '/', element: < HomeComponent />, exact: 'true' },\r\n    { path: '/games/thousand', element: < ThousandComponent />, exact: 'true' },\r\n    { path: '/games/train/*', element: < TrainComponent />, exact: 'true' },\r\n    { path: '/dashboard', element: < DashboardComponent />, exact: 'true' },\r\n    { path: '/auth/', element: < SigninComponent />, exact: 'true' },\r\n    { path: '/auth/signup', element: < SignupComponent />, exact: 'true' },\r\n    { path: '*', element: <Navigate to=\"/\" />, exact: 'true' },\r\n  ];\r\n\r\n  return (\r\n    <Routes>\r\n      {userSelector && userSelector.role === 'member'\r\n        ? privateRoutes.map((route) => <Route {...route} key={route.path} />)\r\n        : publicRoutes.map((route) => <Route {...route} key={route.path} />)\r\n      }\r\n    </Routes>\r\n  );\r\n}\r\n","import React, {useEffect } from 'react';\nimport { httpService } from './services/container';\nimport { BrowserRouter } from \"react-router-dom\";\nimport HeaderComponent from './components/Header.component';\nimport AppRouterComponent from './App-router.component';\n\nfunction App() {\n  useEffect(() => {\n    httpService.get('/api/auth/protected')\n      .subscribe((result) => console.log('protected', result),\n        err => console.log('subs', err))\n  }, []);\n\n  return (\n    <BrowserRouter>\n      <HeaderComponent />\n      {/* <main className=\"container container-h main\"> */}\n      <main className=\"main\">\n        <AppRouterComponent />\n      </main>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport reportWebVitals from './reportWebVitals';\n\nimport { Provider } from 'react-redux';\n// import { createStore, applyMiddleware } from 'redux';\n// import { composeWithDevTools } from 'redux-devtools-extension';\n// import { createEpicMiddleware } from 'redux-observable';\n\n\n// import { rootReducer } from './store/reducers';\n// import { rootEpic } from './store/epics';\nimport { store } from './store';\n\nimport App from './App';\n\nimport './styles.scss';\n\n// import \"materialize-css/dist/js/materialize.min.js\";\n\n// const epicMiddleware = createEpicMiddleware();\n// export const store = createStore(\n//   rootReducer,\n//   composeWithDevTools(\n//     applyMiddleware(\n//       epicMiddleware\n//     )\n//   )\n// );\n\n// epicMiddleware.run(rootEpic);\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}